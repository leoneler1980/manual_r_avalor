<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>7&nbsp; Análisis de datos usando R – Manual de introducción a R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./07-reporte.html" rel="next">
<link href="./05-excel_a_R_intro.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-03540c99dd1a34af77b4c54761d366e2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos coincidentes",
    "search-copy-link-title": "Copiar enlace a la búsqueda",
    "search-hide-matches-text": "Ocultar coincidencias adicionales",
    "search-more-match-text": "más coincidencia en este documento",
    "search-more-matches-text": "más coincidencias en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<link href="site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">

<script src="site_libs/tabwid-1.1.3/tabwid.js"></script>



</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar navegación de la barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./06-analisisresultados.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Análisis de datos usando R</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar navegación de la barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Manual de introducción a R</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-instalacionR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Preparación del ambiente de trabajo</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-comanzandousandoR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Comenzar a trabajar con R y la interfaz de Rstudio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-operadoresR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Operadores en R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-objetosenr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Objetos en R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-excel_a_R_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Transición desde Excel a R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-analisisresultados.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Análisis de datos usando R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-reporte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Preparación de reporte (integración de las salidas en un documento)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-analisisEstadistico.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Apendice</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referencias</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contenido</h2>
   
  <ul>
  <li><a href="#tareas-que-se-deben-de-hacer-para-llevar-a-cabo-un-proyecto-de-análisis-de-datos" id="toc-tareas-que-se-deben-de-hacer-para-llevar-a-cabo-un-proyecto-de-análisis-de-datos" class="nav-link active" data-scroll-target="#tareas-que-se-deben-de-hacer-para-llevar-a-cabo-un-proyecto-de-análisis-de-datos"><span class="header-section-number">7.1</span> Tareas que se deben de hacer para llevar a cabo un proyecto de análisis de datos</a>
  <ul class="collapse">
  <li><a href="#organización-general-antes-de-comenzar" id="toc-organización-general-antes-de-comenzar" class="nav-link" data-scroll-target="#organización-general-antes-de-comenzar"><span class="header-section-number">7.1.1</span> Organización general antes de comenzar</a></li>
  </ul></li>
  <li><a href="#análisis-de-tiempo" id="toc-análisis-de-tiempo" class="nav-link" data-scroll-target="#análisis-de-tiempo"><span class="header-section-number">7.2</span> Análisis de tiempo</a></li>
  <li><a href="#análisis-de-lugar" id="toc-análisis-de-lugar" class="nav-link" data-scroll-target="#análisis-de-lugar"><span class="header-section-number">7.3</span> Análisis de lugar</a></li>
  <li><a href="#análisis-de-persona" id="toc-análisis-de-persona" class="nav-link" data-scroll-target="#análisis-de-persona"><span class="header-section-number">7.4</span> Análisis de persona</a></li>
  <li><a href="#evaluando-si-existe-relación-entre-la-variable-dependiente-e-independiente" id="toc-evaluando-si-existe-relación-entre-la-variable-dependiente-e-independiente" class="nav-link" data-scroll-target="#evaluando-si-existe-relación-entre-la-variable-dependiente-e-independiente"><span class="header-section-number">7.5</span> Evaluando si existe relación entre la variable dependiente e independiente</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Análisis de datos usando R</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="tareas-que-se-deben-de-hacer-para-llevar-a-cabo-un-proyecto-de-análisis-de-datos" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="tareas-que-se-deben-de-hacer-para-llevar-a-cabo-un-proyecto-de-análisis-de-datos"><span class="header-section-number">7.1</span> Tareas que se deben de hacer para llevar a cabo un proyecto de análisis de datos</h2>
<p>Es posible que ya tengas conocimiento sobre la estructura del documento que debes desarrollar para analizar tus datos, ya sea para toma de decisiones o para elaborar un trabajo final. En esta sección nos enfocaremos en la generación de resultados o salidas de R, donde tienes que realizar tablas, gráficos y análisis estadísticos. A continuación, te mostramos un listado de los elementos requeridos en la sección de resultados partiendo de un contexto clínico o epidemiológico:</p>
<ul>
<li><p>Proporciona número de casos, incidencia o prevalencia de un evento.</p></li>
<li><p>Características clínicas, por ejemplo, síntomas comunes, porcentaje de hospitalizados o fallecidos, resultados de laboratorio como porcentaje de confirmados o distribución por especie o subtipo (generalmente presentados en una tabla).</p></li>
<li><p>Tiempo: casos por año, mes, semana u otro intervalo apropiado, para mostrar patrones o cambios a lo largo de un período determinado. Puede estratificarse por grupos de edad, sexo, región o características de persona; lugar (generalmente se presenta en un gráfico). Señale cambios importantes, tendencias estacionales, aberraciones (Ej., Brotes) u otros patrones inusuales.</p></li>
<li><p>Lugar: como el área geográfica donde ocurre el evento. Esto, generalmente, se presenta con un mapa o una tabla.</p></li>
<li><p>Persona, por ejemplo, por grupo de edad, sexo y otras características relevantes (generalmente presentadas en una tabla).</p></li>
</ul>
<p>Existen otros resultados destacados que no se incluyen en las categorías enumeradas anteriormente. Por ejemplo, muchos informes resumidos de vigilancia epidemiológica incluyen datos sobre la integridad y puntualidad de los informes de cada fuente de informes.</p>
<p>Con una base de datos de ejemplo vamos a realizar los pasos en R para producir los requerimientos sugeridos anteriormente. Vamos a usar como fuente de datos para este ejercicio una base de datos de casos de VIH positivos notificados. (Esta base está disponible en el siguiente <strong>link</strong>).</p>
<p>Esta base de datos (o la que vayas a usar) debes de colocarla en la subcarpeta de <strong>“Bases de datos”</strong> dentro de la carpeta del <strong>proyecto</strong> (ejemplo la mi carpeta donde está el proyecto de Rstudio se llama trabajos de campo)<strong>.</strong> A modo de refrescamiento, ver la siguiente imagen de la estructura de sub-carpetas de un proyecto, su jerarquía.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="imagenes/07estructuraex.png" class="img-fluid figure-img"></p>
<figcaption>Estructura básica recomendada para un proyecto en rstudio.</figcaption>
</figure>
</div>
<section id="organización-general-antes-de-comenzar" class="level3" data-number="7.1.1">
<h3 data-number="7.1.1" class="anchored" data-anchor-id="organización-general-antes-de-comenzar"><span class="header-section-number">7.1.1</span> Organización general antes de comenzar</h3>
<p>Como refrescamiento, antes de comenzar recuerda crear el proyecto (ver la sección de Comenzar a trabajar con R y la interfaz de Rstudio)</p>
<p><strong>Procesamiento de datos (cargar, editar, transformar <em>dataframes</em>)</strong></p>
<ul>
<li><p>Crear un documento de rutina de R, (Ctrl+shift+N o en File, R script),</p></li>
<li><p>Comentar al menos el título del trabajo que estas haciendo (escribir # , que es el carácter para hacer comentarios, después de este puedes escribir cualquier cosa y no será interpretado como código).</p></li>
<li><p>Instalar el paquete <a href="http://trinker.github.io/pacman/vignettes/Introduction_to_pacman.html"><strong>pacman</strong></a>(luego nos permitirá con mayor facilidad instalar el resto)</p></li>
<li><p>Cargar los siguientes paquetes:</p></li>
</ul>
<ol type="1">
<li><p><a href="https://cran.r-project.org/web/packages/rio/vignettes/rio.html"><strong>rio</strong></a> (para cargar archivos excel y otros formatos)</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/tidyverse/vignettes/paper.html"><strong>tidyverse</strong></a> (para transformar, revisar la base de datos)</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/janitor/vignettes/janitor.html"><strong>janitor</strong></a> (para tablas y limpieza de datos)</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/flextable/index.html"><strong>flextable</strong></a> (para formato de presentación de las tablas)</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/lubridate/vignettes/lubridate.html"><strong>lubridate</strong></a> (para trabajar con funciones con variables de formatos de fecha)</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/skimr/vignettes/skimr.html"><strong>skimr</strong></a> (para revisar la base de datos)</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/here/vignettes/here.html"><strong>here</strong></a> (para ayudarnos a encontrar los archivos que vamos a usar, también a guardarlos)</p></li>
<li><p><a href="https://www.danieldsjoberg.com/gtsummary/" title="gtsummary"><strong>gtsummary</strong></a> (para hacer tablas presentables y cálculos que usamos con frecuencia en epidemiología)</p></li>
</ol>
<p>Para cargar estos paquetes procedemos a usar la función <strong>p_load()</strong> del paquete <em>{pacman}</em>, en el panel de editor de rutinas, escribes el siguiente comando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"pacman"</span>) <span class="co">#para instalar el paquete pacman (solo una vez)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(rio, </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>               tidyverse, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>               janitor, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>               lubridate, </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>               skimr, </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>               here,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>               flextable,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>               gtsummary) <span class="co">#para instalar y cargar los paquetes necesarios</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Luego de copiar o de introducir el código, preciona <strong>Ctrl+ENTER</strong> al final de la línea de código o en “run” para ejecutarlo.</p>
<p>Otra alternativa para cargar los paquetes es con la función de R base <strong>library()</strong>. Al igual que con p_load() de pacman, escribes el nombre o los nombres de los paquetes separados por coma. <strong>Ojo,</strong> esta función solo carga los paquetes, si el paquete no está instalado, te dará error.</p>
<p>NOTA: Debes tener conexión a internet para poder descargar estos paquetes.</p>
<p>Después de instalar los paquetes no necesitarás instalarlos de nuevo, a menos que re-instales o actualices Rstudio.</p>
<p>Antes de continuar, guarda la rutina en la carpeta de tu proyecto “rutinas” utilizando cualquiera de estas opciones:</p>
<ul>
<li><p>Presionando la combinación de teclas <strong>Ctrl+S</strong></p></li>
<li><p>Haciendo clic en el icono de guardar</p></li>
<li><p>Desde el menú: File -&gt; Save</p></li>
</ul>
<p>El próximo paso es cargar la base de datos, y esto lo podemos hacer de dos formas: escribiendo directamente en la rutina o en la consola, tal como vimos cuando explicamos los <strong>dataframes</strong> en el capítulo 5 de objetos de R, o bien, usando la interfaz de Rstudio.</p>
<p>Recuerda tener tus bases de datos en la carpeta de “datos” dentro de tu carpeta del proyecto, esto es muy importante para facilitar el trabajo.</p>
<p>Vamos a ver cómo sería el código para cargar un archivo de Excel:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#para crear un objeto dataframe (nuestra base)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>base <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"datos"</span>, <span class="st">"sinave_vih.xlsx"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">clean_names</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Explicando un poco el código anterior: estamos creando un nuevo objeto llamado <strong>“base”,</strong>a través de la función de <strong>import</strong> del paquete <strong>rio</strong>, que sirve para cargar archivos tipo .xls, .xlsx., y con la finalidad de localizar la ruta del archivo de la forma más sencilla posible, usamos la función <strong>here()</strong> del paquete <strong>here</strong> escribiendo los parámetros de la sub-carpeta, es decir, agregando entre comillas el nombre de la carpeta donde está la base de datos (primer parámetro: “datos), y después de una coma se agrega el segundo parámetro que es el nombre del archivo, en este ejemplo, el archivo se denomina <em>sinave_vih.xlsx</em>. Luego sigue un operador pipe (%&gt;%) que significa “luego” y a través de la función <strong>clean_names()</strong> del paquete <strong>janitor</strong> podremos “normalizar” los nombres de las columnas o variables de la base de datos importada. Esta normalización consiste, por ejemplo, en estandarizar los nombres de las variables poniéndolas todas en minúsculas, quitar caracteres poco comunes o espacios, entre otros ajustes que consideremos importantes.</p>
<p>Si estás utilizando la misma base de datos del ejemplo, y si hiciste los pasos correctamente, debes de tener una imagen similar a la de la Figura 23, donde puedes ver a la derecha que ya tienes un objeto <em>dataframe</em> cargado (es decir, la base de datos) que contiene 25,227 filas y 71 variables o columnas. (ver figura <a href="#fig-bdimportada" class="quarto-xref">Figura&nbsp;<span class="quarto-unresolved-ref">fig-bdimportada</span></a>)</p>
<div id="fig-bdimportada" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bdimportada-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="imagenes/07cargarbase.png" id="fig-bdimportada" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-bdimportada-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;7.1
</figcaption>
</figure>
</div>
<p>Donde puedes ver a la derecha que ya tienes un objeto dataframe cargado (la base de datos) que tiene 25,227 filas y 71 variables o columnas.</p>
<section id="exploración-de-la-base-de-datos" class="level4" data-number="7.1.1.1">
<h4 data-number="7.1.1.1" class="anchored" data-anchor-id="exploración-de-la-base-de-datos"><span class="header-section-number">7.1.1.1</span> <strong>Exploración de la base de datos</strong></h4>
<p>Entonces, la primera pregunta que te hacemos es; ¿Cuál es el próximo paso por seguir? Realmente debería ser el análisis, pero primero, sería bueno revisar la base de datos para ver los datos “malos” es decir, hacer una exploración para identificar valores anormales, campos vacíos o datos que se cargaron mal, como pasa a veces con las fechas.</p>
<p>El paquete de {<strong>rio}</strong> con la fórmula de <strong>import()</strong> hace un intento de determinar los tipos de variables que se cargan desde el archivo de Excel, pero a veces falla y es, usualmente, con las fechas, porque sin querer había una fecha escrita en un formato no reconocido y el resto como número.</p>
<p>Para explorar la base de datos, podemos hacerlo de forma directa haciendo clic en el panel de ambiente de trabajo en el objeto base (o el nombre que le hayas dado), o puedes escribir en la consola de comandos <strong>View(base)</strong> para cargar el visor de datos.</p>
<p>Otra forma más completa de explorar la base de datos es a través de la función <strong>skim()</strong> o <strong>skim_tee()</strong> del paquete {<strong>skimr}</strong> <span class="citation" data-cites="waring2022">(<a href="#ref-waring2022" role="doc-biblioref">Waring et al. 2022</a>)</span>, puedes utilizar cualquiera de las dos porque ambas producen el mismo reporte. Con estas funciones obtendremos un resumen de cada variable, qué tipo de variable es cada una y muestra el total de campos vacíos, valores únicos, entre otros detalles importantes.</p>
<p>Con estos simples pasos, ya estamos entrando de lleno en el análisis. Recuerda, siempre el primer paso es verificar los datos, si hay valores extremos, datos faltantes, etc., esta es una buena práctica (diríamos que obligatoria) cuando estamos haciendo análisis, luego viene la limpieza de los datos.</p>
<p>Luego de escribir en tu rutina el último comando, debes tener escrito el siguiente código y obtener este resultado:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>base <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"datos"</span>, <span class="st">"sinave_vih.xlsx"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim_tee</span>(base) <span class="co">#para genera un mini reporte de la base</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>── Data Summary ────────────────────────
                           Values
Name                       data  
Number of rows             25615 
Number of columns          41    
_______________________          
Column type frequency:           
  character                20    
  logical                  1     
  numeric                  17    
  POSIXct                  3     
________________________         
Group variables            None  

── Variable type: character ────────────────────────────────────────────────────
   skim_variable           n_missing complete_rate min max empty n_unique
 1 sexo                            0       1         8   9     0        2
 2 grupo_edad                      0       1         2   8     0        9
 3 actividad_ocupacional       24767       0.0331    5 120     0      167
 4 grupo_ocupacional           24769       0.0330   21  76     0       10
 5 categoria_de_afiliacion         0       1        10  23     0        5
 6 nivel_educativo              6763       0.736     8  25     0        6
 7 provincia                       0       1         2   2     0       33
 8 colectivo                    8976       0.650     6  36     0       11
 9 region                          0       1         1   4     0        9
10 tipo_atencion                  82       0.997     8  13     0        4
11 complicaciones              24005       0.0629    7  69     0       19
12 muestra                       268       0.990     2   2     0        2
13 resultado_final             20575       0.197     9  10     0        3
14 condicion                       0       1         4   6     0        2
15 gravedad                    16183       0.368     5  20     0        3
16 edad_fecha_defuncion        25510       0.00410   5   8     0       74
17 diag_final                  24394       0.0477   10  56     0        6
18 clasf_final                 24394       0.0477   10  10     0        3
19 fuente_deteccion                0       1        14  24     0        5
20 confirmado_por              24396       0.0476   11  19     0        2
   whitespace
 1          0
 2          0
 3          0
 4          0
 5          0
 6          0
 7          0
 8          0
 9          0
10          0
11          0
12          0
13          0
14          0
15          0
16          0
17          0
18          0
19          0
20          0

── Variable type: logical ──────────────────────────────────────────────────────
  skim_variable         n_missing complete_rate mean count
1 fecha_inicio_erupcion     25615             0  NaN ": " 

── Variable type: numeric ──────────────────────────────────────────────────────
   skim_variable          n_missing complete_rate       mean       sd    p0
 1 pxid                           0         1     12808      7395.        1
 2 fecha_nacimiento               0         1     30282.     4960.     8416
 3 edad1                        119         0.995    36.8      13.4       0
 4 edad2                      20494         0.200     0.0842    0.710     0
 5 edad3                      20537         0.198     0.101     1.40      0
 6 pais_procedencia               0         1         1.18      0.398     1
 7 semana_inicio_sintomas         0         1        25.6      15.3       1
 8 mes_inicio_sintomas            0         1         6.32      3.50      1
 9 ano_inicio_sintomas            0         1      2019.        1.41   2016
10 semana_atencion                0         1        25.7      15.2       1
11 mes_atencion                   0         1         6.31      3.48      1
12 ano_atencion                   0         1      2019.        1.40   2017
13 semana_toma_muestra        13577         0.470    25.5      14.9       1
14 fecha_toma_muestra         13577         0.470 43672.      531.    42737
15 institucion                    0         1         4.53      0.757     1
16 semana_notificacion            0         1        26.1      15.0       1
17 fecha_notificacion             0         1     43738.      513.    42738
      p25   p50    p75  p100 hist 
 1  6404. 12808 19212. 25615 ▇▇▇▇▇
 2 27144. 30902 33921  44501 ▁▁▆▇▁
 3    27     35    45     98 ▁▇▅▁▁
 4     0      0     0     11 ▇▁▁▁▁
 5     0      0     0     30 ▇▁▁▁▁
 6     1      1     1      3 ▇▁▂▁▁
 7    11     26    39     53 ▇▆▇▆▆
 8     3      6     9     12 ▇▅▅▅▇
 9  2018   2019  2020   2021 ▆▆▇▆▇
10    11     26    39     53 ▇▆▆▆▆
11     3      6     9     12 ▇▅▅▅▇
12  2018   2019  2020   2021 ▅▆▇▆▇
13    12     25    38     53 ▇▆▆▆▆
14 43214  43638 44174  44567 ▆▆▇▅▇
15     4      5     5      5 ▁▁▂▂▇
16    12     26    39     53 ▇▆▇▆▆
17 43315  43718 44232  44615 ▅▆▇▆▇

── Variable type: POSIXct ──────────────────────────────────────────────────────
  skim_variable         n_missing complete_rate min                
1 fecha_inicio_sintomas         0       1       2016-12-03 00:00:00
2 fecha_atencion                0       1       2017-01-02 00:00:00
3 fecha_defuncion           25510       0.00410 2017-02-03 00:00:00
  max                 median              n_unique
1 2022-01-01 00:00:00 2019-08-15 00:00:00     1811
2 2022-01-01 00:00:00 2019-08-23 00:00:00     1653
3 2022-01-01 00:00:00 2020-10-06 00:00:00      100</code></pre>
</div>
</div>
<p>En el ejemplo anterior:</p>
<ul>
<li><p>¿Cuántas variables de texto, numéricas, lógicas (si/no, 1/0), de fechas se cargaron?</p></li>
<li><p>¿Cuantas de las variables están en blanco o tienen muchos valores vacíos, cómo es la distribución de las variables numéricas y fechas, (valores extremos)?</p></li>
<li><p>¿Hay variables que se importaron incorrectamente? Variables que son de un formato y se importaron de otro tipo (fechas que se importan como texto o número por ejemplo)</p></li>
</ul>
<p>Estas son las preguntas que debemos hacernos a partir de este resumen, para ir viendo la data y hacer la limpieza de datos, excluir columnas o variables, filtrar valores extremos o editarlos, cambiar o corregir el formato, etc.</p>
<p>En el ejemplo anterior vemos que vemos que el resultado arrojó 4 tablas con un tipo de variable cada una. La reproducimos aquí para visualizarla mejor:</p>
<p><img src="imagenes/07skimr2.png" class="img-fluid"></p>
<p>Debajo de “<em>Column type frequency</em>” veremos en detalle cuatro tablas consecutivas, una conteniendo las variables de tipo “caracter”, la que sigue muestra las variables de tipo “lógico”, y así sucesivamente. Puedes notar el detalle dentro de cada tabla donde se indica el nombre de cada variable, el total de campos vacíos, la tasa de completitud, valores mínimos, máximos, promedios y valores únicos. Este resultado ofrece un resumen que nos facilita la exploración rápida de la base de datos.</p>
<p>A continuación, podemos ver resaltado los detalles que la función skim() nos brinda, como es un inventario de las variables de un dataframe por tipo de variable.</p>
<p><img src=".png" class="img-fluid"></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="imagenes/07skimr.png" class="img-fluid figure-img"></p>
<figcaption>Resaltado podemos ver los detalles que la función skim() nos brinda como es un inventario de las variables de un dataframe por tipo de variable.</figcaption>
</figure>
</div>
<p>En general, después de este resumen se pueden definir los próximos pasos para el análisis, incluso lo puedes incluir en tu reporte como anexo para añadir más “confianza” a tus hallazgos y conclusiones, porque estás mostrando de forma rápida la “salud” de tus datos.</p>
<p>Esta exploración inicial puedes hacerla de diferentes maneras, sin embargo, usar el paquete <strong>skimr</strong> es la manera más amigable, detallada y rápida.</p>
<p>A medida que vamos avanzando con este ejercicio, explicararemos con más detalles los tipos de campos y variables que identifica R.</p>
</section>
<section id="limpieza-re-structuración-de-datos" class="level4" data-number="7.1.1.2">
<h4 data-number="7.1.1.2" class="anchored" data-anchor-id="limpieza-re-structuración-de-datos"><span class="header-section-number">7.1.1.2</span> Limpieza /re-structuración de datos</h4>
<p>En este paso vamos a modificar la base de datos para prepararla antes de iniciar con nuestro análisis. Tomando en cuenta que debes de preparar un plan de análisis y que este se enfocará en un análisis tipo descriptivo (en tiempo, lugar y persona), vamos a ejecutar los siguientes pasos:</p>
<ul>
<li><p>Vamos a revisar el listado de variables que obtuvimos del resumen del ejercicio anterior para seleccionar las que necesitamos para el análisis.</p></li>
<li><p>Vamos a re-codificar variables que necesiten cambios o ajustes.</p></li>
<li><p>Vamos a excluir o modificar los valores de las variables de interés.</p></li>
</ul>
<p>Una de las características poderosas y deseadas de R es que puedes crear un nuevo objeto a partir de otro, dado que puedes hacer múltiples versiones del original.</p>
<p>Para este análisis vamos a crear un nuevo objeto dataframe que podemos llamar base_arreglada, en la que solo tendremos las variables o columnas que necesitaremos para nuestro análisis, y trataremos de excluir los valores no deseados creando nuevas variables a partir de las que ya tenemos.</p>
<p>Agrega a tu rutina el siguiente código:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>base_arreglada <span class="ot">&lt;-</span> base <span class="sc">%&gt;%</span> <span class="co">#creamos un nuevo elemento</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(fecha_notificacion, <span class="co">#seleccionamos las variables que necesitamos</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>         fecha_atencion,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>         mes_atencion,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>         ano_atencion,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>         semana_atencion,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>         sexo,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>         pais_procedencia,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>         grupo_edad,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>         edad1,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>         nivel_educativo,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>         provincia,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>         clasf_final,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>         condicion) <span class="sc">%&gt;%</span> </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(edad1)) <span class="sc">%&gt;%</span>  <span class="co">#filtramos aquellos casos que no tienen edad</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fecha_notificacion=</span><span class="fu">excel_numeric_to_date</span>(fecha_notificacion), <span class="co">#corrige el formato de la fecha (de numero a fecha),</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>   <span class="at">prov_recla =</span> <span class="fu">case_when</span>(provincia<span class="sc">==</span><span class="st">"01"</span> <span class="sc">|</span> provincia<span class="sc">==</span><span class="st">"02"</span><span class="sc">~</span><span class="st">"provincia capital"</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>                          <span class="cn">TRUE</span><span class="sc">~</span>provincia)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="co">#para remover filas duplicadas</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(base_arreglada) <span class="co">#para ver un ejemplo de la nueva base</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  fecha_notificacion fecha_atencion mes_atencion ano_atencion semana_atencion
1         2018-12-05     2018-12-05           12         2018              49
2         2019-03-25     2019-03-18            3         2019              12
3         2017-08-03     2017-02-24            2         2017               8
4         2021-07-28     2021-07-20            7         2021              29
5         2021-06-18     2021-06-16            6         2021              24
6         2018-08-23     2018-08-23            8         2018              34
       sexo pais_procedencia grupo_edad edad1           nivel_educativo
1 Masculino                3      20_29    28                  Superior
2 Masculino                3   60 o más    64                Secundaria
3  Femenino                3      20_29    26                      &lt;NA&gt;
4 Masculino                3      50_59    56 No sabe / Sin información
5 Masculino                3      30_39    35                  Superior
6 Masculino                3      30_39    31                      &lt;NA&gt;
  provincia clasf_final condicion        prov_recla
1        01        &lt;NA&gt;      Vivo provincia capital
2        18        &lt;NA&gt;      Vivo                18
3        13        &lt;NA&gt;      Vivo                13
4        32        &lt;NA&gt;      Vivo                32
5        11  Confirmado      Vivo                11
6        32        &lt;NA&gt;      Vivo                32</code></pre>
</div>
</div>
<p>Vamos a explicar el código anterior, (el atajo del operador pipe es Ctrl+shift+M)</p>
<ol type="1">
<li><p>El primer paso crear un nuevo objeto (base_arregada) a partir del dataframe “base” usando el operador de asignación.</p></li>
<li><p>Luego o “entonces” (usando el operador pipe o %&gt;%) usamos la función <strong>select()</strong> de <strong>tidyverse</strong> para especificar las variables que vamos a usar en el análisis.</p></li>
<li><p>Luego (operador pipe) usamos la función <strong>filter</strong> para excluir aquellas observaciones que no tienen edad a través del operador ! (operador de negación) y la función <strong>is.na()</strong> de R base.</p></li>
<li><p>Luego vamos usamos la función de <strong>mutate()</strong> para corregir la columna <em>fecha_notificacion</em> que fue importada como número en vez de fecha y usamos la función <strong>excel_numeric_to_date()</strong> del paquete <strong>{janitor}</strong> y también hacemos una pequeña reclasificación de las provincias (para crear la provincia principal con la función <strong>case_when()</strong> de <strong>{tidyverse}</strong>.</p></li>
<li><p>Por último pasamos la función <strong>distinct()</strong> para remover filas que sean duplicadas.</p></li>
</ol>
<p>Después para ver el nuevo dataframe (base_arreglada) usamos la función <strong>head()</strong> de <strong>utils</strong> para ver las primeras 6 observaciones.</p>
<p>Ya con este nuevo dataframe podemos comenzar a trabajar en nuestro análisis.</p>
</section>
</section>
</section>
<section id="análisis-de-tiempo" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="análisis-de-tiempo"><span class="header-section-number">7.2</span> Análisis de tiempo</h2>
<p>Ahora vamos a comenzar a hacer tablas usando algunas de las funciones de <strong>janitor</strong> para hacer nuestra exploración (y análisis) de datos. Mientras, vamos explicando los diferentes tipos de formatos de las variables o campos.</p>
<p>En esta sección vamos a ver un formato muy común que son las <em>fechas</em>, las cuales usamos para poder ver el comportamiento de algún evento en el tiempo.</p>
<p>Cuando usamos la función de <strong>import()</strong> del paquete {<strong>rio}</strong>, esta hace el mejor intento para detectar que tipo de tiempo es con base a su contenido. De forma predeterminada, asume el campo como formato o clase <em>POCIXct</em> o tiempo calendario, que es un formato especial de R para almacenar números en formato de fecha desde 1970-01-01.</p>
<p>A veces los campos de fechas pueden importarse como texto o número (en especial cuando importamos bases en formato MS Excel o xlsx), por tanto, debemos transformar estos campos para poder hacer cálculos usando fechas.</p>
<p>Para los gráficos, la clase <em>Date</em> es mejor de utilizar, y para ello, recomendamos transformar los campos de fecha POCIXct a Date. Veremos más sobre la clase Date más adelante con el uso del paquete <strong>ggplot</strong>.</p>
<p>Para ver de forma rápida e individual a cuál formato o clase pertenece una variable, podemos usar la función <strong>class()</strong> de R base: <strong>class(<em>base_arreglada$fecha_atencion)</em></strong><em>.</em></p>
<p>Para transformarla puedes incluir en el código anterior dentro de la función de <strong>mutate</strong> el cambio de las variables de fecha usando la función <strong>as.Date</strong>().</p>
<p>Para ver qué clase o formato son todas las variables de forma rápida, podemos usar la función <strong>str()</strong> de R base, que es muy parecida a la función <strong>skim()</strong>. Te mostramos cómo hacerlo a continuación:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>base_arreglada <span class="ot">&lt;-</span> base <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(fecha_notificacion,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>         fecha_atencion,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>         mes_atencion,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>         ano_atencion,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>         semana_atencion,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>         sexo,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>         pais_procedencia,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>         region,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>         grupo_edad,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>         edad1,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>         nivel_educativo,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>         provincia,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>         clasf_final,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>         condicion) <span class="sc">%&gt;%</span> </span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(edad1)) <span class="sc">%&gt;%</span>  </span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fecha_notificacion=</span><span class="fu">excel_numeric_to_date</span>(fecha_notificacion), <span class="co">#corrige el formato de la fecha (de numero a fecha),</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>   <span class="at">prov_recla =</span> <span class="fu">case_when</span>(provincia<span class="sc">==</span><span class="st">"01"</span> <span class="sc">|</span> provincia<span class="sc">==</span><span class="st">"02"</span><span class="sc">~</span><span class="st">"provincia capital"</span>,</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>                          provincia <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"03"</span>,<span class="st">"04"</span>,<span class="st">"05"</span>,<span class="st">"06"</span>,<span class="st">"07"</span>,</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"08"</span>,<span class="st">"09"</span>,<span class="st">"10"</span>,<span class="st">"11"</span>,<span class="st">"12"</span>)<span class="sc">~</span><span class="st">"provincias centrales"</span>, </span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>                          provincia <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"13"</span>,<span class="st">"14"</span>,<span class="st">"15"</span>,<span class="st">"16"</span>)<span class="sc">~</span><span class="st">"provincias orientales"</span>,</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>                          provincia <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"17"</span>, <span class="st">"18"</span>,<span class="st">"19"</span>,<span class="st">"20"</span>)<span class="sc">~</span><span class="st">"povincias occidentales"</span>,</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>                          provincia <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"21"</span>,<span class="st">"22"</span>,<span class="st">"23"</span>)<span class="sc">~</span><span class="st">"provincias del norte"</span>,</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>                          provincia <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"24"</span>,<span class="st">"25"</span>,<span class="st">"26"</span>,<span class="st">"27"</span>,<span class="st">"28"</span>,<span class="st">"29"</span>,<span class="st">"30"</span>,<span class="st">"31"</span>,<span class="st">"32"</span>)<span class="sc">~</span><span class="st">"provincias del sur"</span>,</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>                          </span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>                          <span class="cn">TRUE</span><span class="sc">~</span><span class="st">"resto de provincias"</span>),</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">fecha_notificacion=</span><span class="fu">as.Date</span>(fecha_notificacion), <span class="co">#Agregamos el cambio de tipo POSIXct a Date para ambas variables fecha.</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>         <span class="at">fecha_atencion=</span><span class="fu">as.Date</span>(fecha_atencion)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str</span>(base_arreglada) <span class="co">#para ver las clases de todas las variables en el dataframe</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   25047 obs. of  15 variables:
 $ fecha_notificacion: Date, format: "2018-12-05" "2019-03-25" ...
 $ fecha_atencion    : Date, format: "2018-12-05" "2019-03-18" ...
 $ mes_atencion      : num  12 3 2 7 6 8 1 9 2 6 ...
 $ ano_atencion      : num  2018 2019 2017 2021 2021 ...
 $ semana_atencion   : num  49 12 8 29 24 34 1 39 5 24 ...
 $ sexo              : chr  "Masculino" "Masculino" "Femenino" "Masculino" ...
 $ pais_procedencia  : num  3 3 3 3 3 3 3 3 3 3 ...
 $ region            : chr  "O" "II" "VIII" "O" ...
 $ grupo_edad        : chr  "20_29" "60 o más" "20_29" "50_59" ...
 $ edad1             : num  28 64 26 56 35 31 28 47 31 20 ...
 $ nivel_educativo   : chr  "Superior" "Secundaria" NA "No sabe / Sin información" ...
 $ provincia         : chr  "01" "18" "13" "32" ...
 $ clasf_final       : chr  NA NA NA NA ...
 $ condicion         : chr  "Vivo" "Vivo" "Vivo" "Vivo" ...
 $ prov_recla        : chr  "provincia capital" "povincias occidentales" "provincias orientales" "provincias del sur" ...</code></pre>
</div>
</div>
<p>Para este análisis nos interesaría ver el comportamiento trimestral de cada año de los casos reportados. Con menos cantidad de código es más fácil transformar una fecha a otro tipo de presentación. Para crear la columna de trimestre usamos la función <strong>quarter()</strong> que viene con el paquete <strong>{lubridate}</strong> (incluido dentro de tidyverse) y le pasamos los argumentos de <em>with_year=T</em> y <em>fiscal_start=1</em> para especificar que los trimestres comienzan en enero.</p>
<p>Veamos en acción lo que acabamos de explicar:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>base_arreglada <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a_trimestre_atencion=</span><span class="fu">quarter</span>(fecha_atencion, <span class="at">with_year =</span> T, <span class="at">fiscal_start =</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span> <span class="co">#Con esta línea de codigos creamos una nueva variable con el mes y año de atención </span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(a_trimestre_atencion) <span class="co">#hacemos una tabla simple con la nueva variable</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> a_trimestre_atencion    n      percent
               2017.1  915 3.653132e-02
               2017.2 1026 4.096299e-02
               2017.3 1080 4.311894e-02
               2017.4 1017 4.060367e-02
               2018.1 1258 5.022558e-02
               2018.2 1068 4.263984e-02
               2018.3 1131 4.515511e-02
               2018.4 1157 4.619316e-02
               2019.1 1659 6.623548e-02
               2019.2 1417 5.657364e-02
               2019.3 1270 5.070468e-02
               2019.4 1018 4.064359e-02
               2020.1 1622 6.475825e-02
               2020.2  731 2.918513e-02
               2020.3 1109 4.427676e-02
               2020.4 1529 6.104523e-02
               2021.1 1697 6.775263e-02
               2021.2 1450 5.789116e-02
               2021.3 1690 6.747315e-02
               2021.4 1202 4.798978e-02
               2022.1    1 3.992494e-05</code></pre>
</div>
</div>
<p>Como podemos ver en la salida anterior, tenemos cinco años completos y el primer trimestre del 2022. Nos vamos a centrar en los últimos tres años filtrando los datos con la función <strong>filter()</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>base_arreglada <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a_trimestre_atencion=</span><span class="fu">quarter</span>(fecha_atencion, <span class="at">with_year =</span> T, <span class="at">fiscal_start =</span> <span class="dv">1</span>))<span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2019-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span>  <span class="co">#Especificamos hasta donde queremos el periodo </span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tabyl</span>(a_trimestre_atencion) <span class="co">#hacemos una tabla simple con la nueva variable</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> a_trimestre_atencion    n    percent
               2019.1 1659 0.10119556
               2019.2 1417 0.08643406
               2019.3 1270 0.07746737
               2019.4 1018 0.06209589
               2020.1 1622 0.09893864
               2020.2  731 0.04458948
               2020.3 1109 0.06764670
               2020.4 1529 0.09326583
               2021.1 1697 0.10351348
               2021.2 1450 0.08844699
               2021.3 1690 0.10308650
               2021.4 1202 0.07331951</code></pre>
</div>
</div>
<p>En los parámetros de <strong>filter()</strong> llamamos la variable dos veces usando los operadores mayor (&gt;) e igual (=) para que se incluya el valor más antiguo seguido de una coma y para el valor más reciente usamos menor que (&lt;) con un valor que no vamos a necesitar. Cuando especificamos el valor de una fecha siempre debe de ir entre comillas (” “).</p>
<p>Todavía en el ejercicio anterior no hemos creado un nuevo objeto, para esto podemos hacer lo siguiente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>tabla_01 <span class="ot">&lt;-</span> base_arreglada <span class="sc">%&gt;%</span>  <span class="co">#Nuevo objeto</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">a_trimestre_atencion=</span><span class="fu">quarter</span>(fecha_atencion, <span class="at">with_year =</span> T, <span class="at">fiscal_start =</span> <span class="dv">1</span>))<span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2019-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span>  <span class="co">#Especificamos hasta donde queremos el periodo </span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tabyl</span>(a_trimestre_atencion)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>tabla_01</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> a_trimestre_atencion    n    percent
               2019.1 1659 0.10119556
               2019.2 1417 0.08643406
               2019.3 1270 0.07746737
               2019.4 1018 0.06209589
               2020.1 1622 0.09893864
               2020.2  731 0.04458948
               2020.3 1109 0.06764670
               2020.4 1529 0.09326583
               2021.1 1697 0.10351348
               2021.2 1450 0.08844699
               2021.3 1690 0.10308650
               2021.4 1202 0.07331951</code></pre>
</div>
</div>
<p>Ahora vamos a ver esta distribución pero en vez de trimestre de manera mensual por condición de egreso de los últimos 2 años:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>tabla_02 <span class="ot">&lt;-</span> base_arreglada <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a_mes_atencion=</span><span class="fu">format</span>(fecha_atencion, <span class="st">"%Y-%m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2020-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(a_mes_atencion,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>        condicion)  <span class="sc">%&gt;%</span>  <span class="co">#Agragamos la variable nueva o de columna</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"col"</span>, <span class="st">"row"</span>)) <span class="sc">%&gt;%</span> <span class="co">#A partir de esta línea, se usan funciones de "adorn_" para agregar detalles a la tabla</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>() <span class="sc">%&gt;%</span> <span class="co"># agrega los porcentajes a la tabla</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span>  <span class="co">#cambia el formato de los porcentajes</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>() </span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>tabla_02</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> a_mes_atencion    Muerto            Vivo           Total
        2020-01 0.0%  (0) 100.0%    (617) 100.0%    (617)
        2020-02 0.6%  (4)  99.4%    (632) 100.0%    (636)
        2020-03 0.8%  (3)  99.2%    (366) 100.0%    (369)
        2020-04 2.0%  (2)  98.0%     (98) 100.0%    (100)
        2020-05 1.7%  (4)  98.3%    (238) 100.0%    (242)
        2020-06 0.3%  (1)  99.7%    (388) 100.0%    (389)
        2020-07 0.3%  (1)  99.7%    (381) 100.0%    (382)
        2020-08 0.0%  (0) 100.0%    (344) 100.0%    (344)
        2020-09 1.0%  (4)  99.0%    (379) 100.0%    (383)
        2020-10 0.4%  (2)  99.6%    (516) 100.0%    (518)
        2020-11 0.2%  (1)  99.8%    (580) 100.0%    (581)
        2020-12 0.9%  (4)  99.1%    (426) 100.0%    (430)
        2021-01 0.2%  (1)  99.8%    (480) 100.0%    (481)
        2021-02 0.6%  (4)  99.4%    (624) 100.0%    (628)
        2021-03 0.7%  (4)  99.3%    (584) 100.0%    (588)
        2021-04 0.8%  (4)  99.2%    (516) 100.0%    (520)
        2021-05 0.6%  (3)  99.4%    (492) 100.0%    (495)
        2021-06 2.1%  (9)  97.9%    (426) 100.0%    (435)
        2021-07 0.7%  (4)  99.3%    (596) 100.0%    (600)
        2021-08 0.7%  (4)  99.3%    (567) 100.0%    (571)
        2021-09 0.4%  (2)  99.6%    (517) 100.0%    (519)
        2021-10 0.5%  (2)  99.5%    (415) 100.0%    (417)
        2021-11 0.2%  (1)  99.8%    (448) 100.0%    (449)
        2021-12 0.9%  (3)  99.1%    (333) 100.0%    (336)
          Total 0.6% (67)  99.4% (10,963) 100.0% (11,030)</code></pre>
</div>
</div>
<p>Luego de ver el código anterior, también del paquete <strong>janitor</strong>, implementamos varias funciones asociadas con la función <strong>tabyl()</strong> para tablas con la finalidad de agregar totales y porcentajes.</p>
<p>Si queremos presentar la tabla en un formato exportable, podemos usar la función <strong>flextable()</strong> del paquete <strong>flextable</strong> y nuestra primera tabla quedaría así:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>tabla_02 <span class="ot">&lt;-</span> base_arreglada <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a_mes_atencion=</span><span class="fu">format</span>(fecha_atencion, <span class="st">"%Y-%m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2020-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(a_mes_atencion,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>        condicion)  <span class="sc">%&gt;%</span>  <span class="co">#Agragamos la variable nueva o de columna</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"col"</span>, <span class="st">"row"</span>)) <span class="sc">%&gt;%</span> <span class="co">#A partir de esta línea, se usan funciones de "adorn_" para agregar detalles a la tabla</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="co"># Con esta función creamos una versión presentable de la tabla</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>tabla_02</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-f3aa61e4{}.cl-f39fd896{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f3a3fe1c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-f3a438c8{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f3a438d2{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f3a438dc{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-f3aa61e4"><thead><tr style="overflow-wrap:break-word;"><th class="cl-f3a438c8"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">a_mes_atencion</span></p></th><th class="cl-f3a438c8"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">Muerto</span></p></th><th class="cl-f3a438c8"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">Vivo</span></p></th><th class="cl-f3a438c8"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">Total</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2020-01</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.0%  (0)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (617)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (617)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2020-02</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.6%  (4)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.4%    (632)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (636)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2020-03</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.8%  (3)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.2%    (366)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (369)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2020-04</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2.0%  (2)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">98.0%     (98)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (100)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2020-05</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">1.7%  (4)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">98.3%    (238)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (242)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2020-06</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.3%  (1)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.7%    (388)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (389)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2020-07</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.3%  (1)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.7%    (381)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (382)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2020-08</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.0%  (0)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (344)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (344)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2020-09</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">1.0%  (4)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.0%    (379)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (383)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2020-10</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.4%  (2)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.6%    (516)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (518)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2020-11</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.2%  (1)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.8%    (580)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (581)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2020-12</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.9%  (4)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.1%    (426)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (430)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2021-01</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.2%  (1)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.8%    (480)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (481)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2021-02</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.6%  (4)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.4%    (624)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (628)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2021-03</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.7%  (4)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.3%    (584)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (588)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2021-04</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.8%  (4)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.2%    (516)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (520)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2021-05</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.6%  (3)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.4%    (492)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (495)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2021-06</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2.1%  (9)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">97.9%    (426)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (435)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2021-07</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.7%  (4)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.3%    (596)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (600)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2021-08</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.7%  (4)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.3%    (567)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (571)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2021-09</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.4%  (2)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.6%    (517)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (519)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2021-10</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.5%  (2)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.5%    (415)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (417)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2021-11</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.2%  (1)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.8%    (448)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (449)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">2021-12</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.9%  (3)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.1%    (333)</span></p></td><td class="cl-f3a438d2"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0%    (336)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f3a438dc"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">Total</span></p></td><td class="cl-f3a438dc"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">0.6% (67)</span></p></td><td class="cl-f3a438dc"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">99.4% (10,963)</span></p></td><td class="cl-f3a438dc"><p class="cl-f3a3fe1c"><span class="cl-f39fd896">100.0% (11,030)</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Con esta tabla podemos ir haciendo nuestro análisis de como los casos nuevos de VIH se han comportado en estos últimos 2 años. Podemos ir agregando en nuestro reporte <em>“El total de casos reportados desde enero del 2020 hasta diciembre del 2021 fueron 11,030”</em> por ejemplo.</p>
<p>Un detalle a resaltar es, en esta tabla (tabla_01) le agregamos un formato de presentación ya no la podemos usar para hacer otros análisis, como por ejemplo sacar el promedio de casos reportados por mes (u otras medidas de tendencia central). Digamos que quisiéramos reportar estos valores, simplemente podemos crear un objeto a partir de esta tabla original</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>resumen_med_tend_cent <span class="ot">&lt;-</span> base_arreglada <span class="sc">%&gt;%</span>  <span class="co">#nuevo objeto, un dataframe</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a_mes_atencion=</span><span class="fu">format</span>(fecha_atencion, <span class="st">"%Y-%m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2020-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(a_mes_atencion, condicion) <span class="sc">%&gt;%</span>  </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">"col"</span>) <span class="sc">%&gt;%</span> <span class="co">#añadiendo total de columna</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">casos_fallecidos_min=</span><span class="fu">min</span>(Muerto, <span class="at">na.rm =</span> T), <span class="co">#funcion para resumir datos</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_fallecidos_pro=</span><span class="fu">mean</span>(Muerto, <span class="at">na.rm =</span> T),</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_fallecidos_sd=</span><span class="fu">sd</span>(Muerto, <span class="at">na.rm =</span> T),</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_fallecidos_median=</span><span class="fu">median</span>(Muerto, <span class="at">na.rm=</span>T),</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_fallecidos_max=</span><span class="fu">max</span>(Muerto, <span class="at">na.rm =</span> T),</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_vivos_min=</span><span class="fu">min</span>(Vivo, <span class="at">na.rm =</span> T),</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_vivos_pro=</span><span class="fu">mean</span>(Vivo, <span class="at">na.rm =</span> T),</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_vivos_sd=</span><span class="fu">sd</span>(Vivo, <span class="at">na.rm =</span> T),</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_vivos_median=</span><span class="fu">median</span>(Vivo, <span class="at">na.rm=</span>T),</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_vivos_max=</span><span class="fu">max</span>(Vivo, <span class="at">na.rm =</span> T),</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_total_min=</span><span class="fu">min</span>(Total, <span class="at">na.rm =</span> T),</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_total_pro=</span><span class="fu">mean</span>(Total, <span class="at">na.rm =</span> T),</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_total_sd=</span><span class="fu">sd</span>(Total, <span class="at">na.rm =</span> T),</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_total_median=</span><span class="fu">median</span>(Total, <span class="at">na.rm=</span>T),</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>          <span class="at">casos_total_max=</span><span class="fu">max</span>(Total, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(.), <span class="at">names_to =</span> <span class="st">"medida"</span>, <span class="at">values_to =</span> <span class="st">"resultado"</span>)</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>resumen_med_tend_cent</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 2
   medida                  resultado
   &lt;chr&gt;                       &lt;dbl&gt;
 1 casos_fallecidos_min         0   
 2 casos_fallecidos_pro         2.79
 3 casos_fallecidos_sd          1.93
 4 casos_fallecidos_median      3   
 5 casos_fallecidos_max         9   
 6 casos_vivos_min             98   
 7 casos_vivos_pro            457.  
 8 casos_vivos_sd             131.  
 9 casos_vivos_median         464   
10 casos_vivos_max            632   
11 casos_total_min            100   
12 casos_total_pro            460.  
13 casos_total_sd             131.  
14 casos_total_median         465   
15 casos_total_max            636   </code></pre>
</div>
</div>
<p>El código anterior pudiera parecer cargado (y lo es) pero es una buena forma de ver los detalles de los valores que queremos obtener y también el uso de otras funciones que tienen mucho peso cuando manejamos datos como es <strong>reframe()</strong>, <strong>pivot_()</strong> de <strong>tidyverse</strong> que sirven para crear objetos con resumen de nuestros datos.</p>
<p>Con el objeto <em>resumen_med_ten_cent</em> podemos ver que el promedio de casos totales por mes fue de 456.7916667 casos reportados, con un mínimo de 98 casos y un máximo de 632.</p>
<p>Otro abordaje para obtener estos resultados y también en un formato presentable es usando la función <strong>summary</strong> de R base, nos ahorra muchos pasos. Aquí un ejemplo :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>base_arreglada <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a_mes_atencion=</span><span class="fu">format</span>(fecha_atencion, <span class="st">"%Y-%m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2020-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(a_mes_atencion, condicion) <span class="sc">%&gt;%</span> </span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">"col"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>() <span class="co">#Esta función se puede usar en los dataframes como en las matrices y vectores.</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> a_mes_atencion         Muerto           Vivo           Total      
 Length:24          Min.   :0.000   Min.   : 98.0   Min.   :100.0  
 Class :character   1st Qu.:1.000   1st Qu.:380.5   1st Qu.:382.8  
 Mode  :character   Median :3.000   Median :464.0   Median :465.0  
                    Mean   :2.792   Mean   :456.8   Mean   :459.6  
                    3rd Qu.:4.000   3rd Qu.:570.2   3rd Qu.:573.5  
                    Max.   :9.000   Max.   :632.0   Max.   :636.0  </code></pre>
</div>
</div>
<p>El único detalle de esta forma de visualización es que no tenemos la desviación estándar, pero es un resumen bien completo para los valores numéricos.</p>
<p>Hasta este punto, ya tenemos una primera parte del análisis. Ahora vamos a ver la versión gráfica, usando las funciones del <strong>ggplot2</strong> de <strong>tydiverse</strong>. Estas funciones se basan en las reglas de “gramática de gráficos”, y haciendo una explicación bien resumida de este concepto, esta gramática se refiere a reglas muy similares a las que tenemos en los idiomas como el español o el inglés.</p>
<p>Un gráfico es un compuesto de varios elementos, tales como la estética, el texto que lleva, los ejes, los formatos, entre otros, que se van construyendo por capas o layers (en inglés). Hay libros dedicados a este tema (<a href="https://ggplot2-book.org/">Como por ejemplo este</a>) y páginas tutoriales (como <a href="https://r-graph-gallery.com/">esta</a>) que ayudan mucho a cómo construir de forma más estructurada un gráfico para fines de analizar datos.</p>
<p>La ventaja de escribir un código para crear gráficos es que permite automatizar el proceso y, muchas veces, podemos tomar prestado el código para no comenzar desde 0.</p>
<p>La mejor forma de explicar el código o lenguaje de gramática de gráficos (en adelante <strong>ggplot</strong>) es haciendo un ejercicio para facilitar su comprensión en R. Antes de hacer el gráfico, es bueno planear qué tipo de gráficos pueden ser usados a partir de los datos que se tienen.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="imagenes/07tablagrafp.png" class="img-fluid figure-img"></p>
<figcaption>Tipos de gráficos a ser usado en base los datos</figcaption>
</figure>
</div>
<p>Veamos un ejemplo usando la tabla que hemos venido trabajando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>base_arreglada <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a_mes_atencion=</span><span class="fu">format</span>(fecha_atencion, <span class="st">"%Y-%m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2020-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(a_mes_atencion, condicion) <span class="sc">%&gt;%</span> </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">"col"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>a_mes_atencion, <span class="at">y=</span>Total))<span class="sc">+</span> <span class="co">#Espacificamos lo que vamos a graficar</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="co">#Agregamos una capa de columnas</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06-analisisresultados_files/figure-html/27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>¡Tenemos nuestro primer gráfico!, pero como puedes ver, puede ser mejorado con el fin de ser presentado en un reporte.</p>
<p>Lo primero que vemos que está alterado es el <strong>eje x</strong>, o el año y la fecha de la notificación. Una forma de corregir esto es rotando a 45 grados el texto. A tomar en cuenta, cuando transformamos datos, usamos el operador pipe <strong>(%&gt;%)</strong>, en ggplot, el equivalente es el signo de suma (<strong>+</strong>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>base_arreglada <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a_mes_atencion=</span><span class="fu">format</span>(fecha_atencion, <span class="st">"%Y-%m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2020-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(a_mes_atencion, condicion) <span class="sc">%&gt;%</span> </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">"col"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>a_mes_atencion, <span class="at">y=</span>Total))<span class="sc">+</span> <span class="co">#Espacificamos lo que vamos a graficar</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color=</span><span class="st">"black"</span>, <span class="at">fill=</span><span class="st">"white"</span>)<span class="sc">+</span> <span class="co">#Agregamos una capa de columnas y cambiamos el color del borde y del llenado</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">45</span>, <span class="at">hjust=</span><span class="dv">1</span>),</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="st">"white"</span>)) <span class="co">#en esta sección cambiamos parametros de cada elemento del gráfico, color, tamaño, etc. de elementos generales, Solo estamos modificando el texto del eje x y el color de fondo del panel.</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06-analisisresultados_files/figure-html/28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Hemos cambiado varios elementos como el color de las barras, la presentación del texto del eje x y el color de fondo del panel. Ahora vamos a agregar los títulos, como el título del gráfico y los de los ejes. Para esto insertamos el comando de <strong>labs()</strong> que significa labels o etiquetas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>base_arreglada <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a_mes_atencion=</span><span class="fu">format</span>(fecha_atencion, <span class="st">"%Y-%m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2020-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(a_mes_atencion, condicion) <span class="sc">%&gt;%</span> </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">"col"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>a_mes_atencion, <span class="at">y=</span>Total))<span class="sc">+</span> <span class="co">#Espacificamos lo que vamos a graficar</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color=</span><span class="st">"grey75"</span>, <span class="at">fill=</span><span class="st">"white"</span>)<span class="sc">+</span> <span class="co">#Agregamos una capa de columnas y cambiamos el color del borde y del llenado</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Distribución de casos de VIH notificados"</span>,</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Periodo: 2020-2021"</span>,</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">"Año y mes de diagnostico"</span>,</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">"Casos notificados"</span>)<span class="sc">+</span><span class="co">#Aquí especificamos el título, subtitulo y nombres de los ejes.</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">45</span>, <span class="at">hjust=</span><span class="dv">1</span>),</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="st">"white"</span>)) <span class="co">#en esta sección cambiamos parametros de cada elemento del gráfico, color, tamaño, etc. de elementos generales, Solo estamos modificando el texto del eje x y el color de fondo del panel.</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06-analisisresultados_files/figure-html/29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Si comparas el primer gráfico con este se nota mucho la diferencia, (aunque todavía le falta mucho, este se puede presentar). Este seria nuestro histograma, de hecho, hay un <strong>geom_</strong> específico para los histogramas, pero como mencioné anteriormente, para el paquete de ggplot hay mucha documentación que básicamente se requiere un entrenamiento aparte. Fijandote en los códigos de ejemplos y también buscando ejemplos en la red, (ejemplo: “como hacer un gráfico de línea con ggplot) vas a ir aprendiendo de forma rutinaria el uso de ggplot.</p>
<p>También a considerar, a diferencias de las tablas, los gráficos podemos directamente (en caso de necesitar) ya sea al clipboard o guardarlos como imagen desde el menú de “plots” en el panel de archivos, gráficos, paquetes, ayuda y visor. Para esto podemos hacer clic donde dice “Export” en el menú y seleccionar ya sea guardar como imagen, como pdf o al clipboard para pegarlo en un documento de Word o Excel o una presentación. Si quieres cambiar el tamaño puede primero usar el zoom o la lupa y aquí manualmente cambiar el tamaño del gráfico y hacer un clic derecho y seleccionar guardar como (igual que desde una página web).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="imagenes/07saveimg.png" class="img-fluid figure-img"></p>
<figcaption>Para exportar los gráficos de forma manual con Rstudio</figcaption>
</figure>
</div>
</section>
<section id="análisis-de-lugar" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="análisis-de-lugar"><span class="header-section-number">7.3</span> Análisis de lugar</h2>
<p>Ya tenemos una tabla y un gráfico sencillo para describir el comportamiento de los casos notificados del evento y una salida para hacer un resumen descriptivo de los casos a través del tiempo.</p>
<p>Ahora vamos a ver como ha sido la distribución por zona geográfica, en este caso las provincias de residencia de los casos. Para explorar, vamos a construir una tabla que nos será más sencilla y tambien para mostrar otra forma de como hacer tablas con detalles y listas para presentar usando el paquete <strong>gtsummary</strong>.</p>
<p>Esta tabla tendrá como columnas de la provincia de residencia y otra con el total de casos por provincia. Podemos tomar el código que usamos para el análisis de tiempo pero con alguna variación, veamos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>tabla_03 <span class="ot">&lt;-</span> base_arreglada <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a_mes_atencion=</span><span class="fu">format</span>(fecha_atencion, <span class="st">"%Y-%m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2020-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(region,prov_recla, condicion) <span class="sc">%&gt;%</span> <span class="co">#solo seleccionamos las variables que vamos a presentar en la tabla</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by=</span>condicion, <span class="at">sort =</span> <span class="fu">all_categorical</span>() <span class="sc">~</span> <span class="st">"frequency"</span>) <span class="sc">%&gt;%</span> <span class="co">#este es la función más básica de gtsummary (tbl_summary), los parametros que usamos fue separar la columna condicion en sus categorias y ordenamos según la frecuencia de casos usando el parametro sort.</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_overall</span>() <span class="co">#con esta funcion de gtsummary agregamos una columna de total</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>tabla_03</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fgzfxebgil" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fgzfxebgil table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fgzfxebgil thead, #fgzfxebgil tbody, #fgzfxebgil tfoot, #fgzfxebgil tr, #fgzfxebgil td, #fgzfxebgil th {
  border-style: none;
}

#fgzfxebgil p {
  margin: 0;
  padding: 0;
}

#fgzfxebgil .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fgzfxebgil .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fgzfxebgil .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fgzfxebgil .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fgzfxebgil .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fgzfxebgil .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fgzfxebgil .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fgzfxebgil .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fgzfxebgil .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fgzfxebgil .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fgzfxebgil .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fgzfxebgil .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fgzfxebgil .gt_spanner_row {
  border-bottom-style: hidden;
}

#fgzfxebgil .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fgzfxebgil .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fgzfxebgil .gt_from_md > :first-child {
  margin-top: 0;
}

#fgzfxebgil .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fgzfxebgil .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fgzfxebgil .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fgzfxebgil .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fgzfxebgil .gt_row_group_first td {
  border-top-width: 2px;
}

#fgzfxebgil .gt_row_group_first th {
  border-top-width: 2px;
}

#fgzfxebgil .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fgzfxebgil .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fgzfxebgil .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fgzfxebgil .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fgzfxebgil .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fgzfxebgil .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fgzfxebgil .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fgzfxebgil .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fgzfxebgil .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fgzfxebgil .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fgzfxebgil .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fgzfxebgil .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fgzfxebgil .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fgzfxebgil .gt_left {
  text-align: left;
}

#fgzfxebgil .gt_center {
  text-align: center;
}

#fgzfxebgil .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fgzfxebgil .gt_font_normal {
  font-weight: normal;
}

#fgzfxebgil .gt_font_bold {
  font-weight: bold;
}

#fgzfxebgil .gt_font_italic {
  font-style: italic;
}

#fgzfxebgil .gt_super {
  font-size: 65%;
}

#fgzfxebgil .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fgzfxebgil .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fgzfxebgil .gt_indent_1 {
  text-indent: 5px;
}

#fgzfxebgil .gt_indent_2 {
  text-indent: 10px;
}

#fgzfxebgil .gt_indent_3 {
  text-indent: 15px;
}

#fgzfxebgil .gt_indent_4 {
  text-indent: 20px;
}

#fgzfxebgil .gt_indent_5 {
  text-indent: 25px;
}

#fgzfxebgil .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#fgzfxebgil div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="gt_col_headings header">
<th id="label" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Characteristic</strong></th>
<th id="stat_0" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Overall</strong><br>
N = 11,030<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
<th id="stat_1" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Muerto</strong><br>
N = 67<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
<th id="stat_2" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Vivo</strong><br>
N = 10,963<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">region</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;O</td>
<td class="gt_row gt_center" headers="stat_0">4,903 (44%)</td>
<td class="gt_row gt_center" headers="stat_1">16 (24%)</td>
<td class="gt_row gt_center" headers="stat_2">4,887 (45%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;II</td>
<td class="gt_row gt_center" headers="stat_0">2,175 (20%)</td>
<td class="gt_row gt_center" headers="stat_1">39 (58%)</td>
<td class="gt_row gt_center" headers="stat_2">2,136 (19%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;V</td>
<td class="gt_row gt_center" headers="stat_0">1,508 (14%)</td>
<td class="gt_row gt_center" headers="stat_1">3 (4.5%)</td>
<td class="gt_row gt_center" headers="stat_2">1,505 (14%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;III</td>
<td class="gt_row gt_center" headers="stat_0">852 (7.7%)</td>
<td class="gt_row gt_center" headers="stat_1">2 (3.0%)</td>
<td class="gt_row gt_center" headers="stat_2">850 (7.8%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;I</td>
<td class="gt_row gt_center" headers="stat_0">575 (5.2%)</td>
<td class="gt_row gt_center" headers="stat_1">2 (3.0%)</td>
<td class="gt_row gt_center" headers="stat_2">573 (5.2%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;VIII</td>
<td class="gt_row gt_center" headers="stat_0">390 (3.5%)</td>
<td class="gt_row gt_center" headers="stat_1">2 (3.0%)</td>
<td class="gt_row gt_center" headers="stat_2">388 (3.5%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;VII</td>
<td class="gt_row gt_center" headers="stat_0">305 (2.8%)</td>
<td class="gt_row gt_center" headers="stat_1">1 (1.5%)</td>
<td class="gt_row gt_center" headers="stat_2">304 (2.8%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;IV</td>
<td class="gt_row gt_center" headers="stat_0">271 (2.5%)</td>
<td class="gt_row gt_center" headers="stat_1">1 (1.5%)</td>
<td class="gt_row gt_center" headers="stat_2">270 (2.5%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;VI</td>
<td class="gt_row gt_center" headers="stat_0">51 (0.5%)</td>
<td class="gt_row gt_center" headers="stat_1">1 (1.5%)</td>
<td class="gt_row gt_center" headers="stat_2">50 (0.5%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">prov_recla</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;provincias del sur</td>
<td class="gt_row gt_center" headers="stat_0">4,563 (41%)</td>
<td class="gt_row gt_center" headers="stat_1">39 (58%)</td>
<td class="gt_row gt_center" headers="stat_2">4,524 (41%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;provincias centrales</td>
<td class="gt_row gt_center" headers="stat_0">2,637 (24%)</td>
<td class="gt_row gt_center" headers="stat_1">6 (9.0%)</td>
<td class="gt_row gt_center" headers="stat_2">2,631 (24%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;provincia capital</td>
<td class="gt_row gt_center" headers="stat_0">1,501 (14%)</td>
<td class="gt_row gt_center" headers="stat_1">10 (15%)</td>
<td class="gt_row gt_center" headers="stat_2">1,491 (14%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;provincias del norte</td>
<td class="gt_row gt_center" headers="stat_0">1,020 (9.2%)</td>
<td class="gt_row gt_center" headers="stat_1">3 (4.5%)</td>
<td class="gt_row gt_center" headers="stat_2">1,017 (9.3%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;povincias occidentales</td>
<td class="gt_row gt_center" headers="stat_0">696 (6.3%)</td>
<td class="gt_row gt_center" headers="stat_1">3 (4.5%)</td>
<td class="gt_row gt_center" headers="stat_2">693 (6.3%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;provincias orientales</td>
<td class="gt_row gt_center" headers="stat_0">595 (5.4%)</td>
<td class="gt_row gt_center" headers="stat_1">5 (7.5%)</td>
<td class="gt_row gt_center" headers="stat_2">590 (5.4%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;resto de provincias</td>
<td class="gt_row gt_center" headers="stat_0">18 (0.2%)</td>
<td class="gt_row gt_center" headers="stat_1">1 (1.5%)</td>
<td class="gt_row gt_center" headers="stat_2">17 (0.2%)</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="4" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> n (%)</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p>Como puedes ver en la tabla anterior, el 23% de los casos son de la provincia Santo Domingo, durante los 3 años que estamos describiendo.</p>
<p>Para tener una tabla más acabada, como por ejemplo cambiar el idioma de los títulos a español, así como agregar una nota de pie y el título vamos añadiendo estas funciones del paquete de <strong>gtsummary</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">theme_gtsummary_language</span>(<span class="at">language =</span> <span class="st">"es"</span>, <span class="at">decimal.mark =</span> <span class="st">"."</span>) <span class="co">#esta funcion global es para decirle al paquete gtsummary que idioma usar para las tablas</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Setting theme "language: es"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>tabla_03 <span class="ot">&lt;-</span> base_arreglada <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a_mes_atencion=</span><span class="fu">format</span>(fecha_atencion, <span class="st">"%Y-%m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2020-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(prov_recla, condicion) <span class="sc">%&gt;%</span> </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by=</span>condicion, <span class="at">sort =</span> <span class="fu">all_categorical</span>() <span class="sc">~</span> <span class="st">"frequency"</span>,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>              prov_recla<span class="sc">~</span><span class="st">"Provincias de residencia de los casos"</span>) <span class="sc">%&gt;%</span>  <span class="co">#En la segunda linea, le cambiamos el nombre a la variable por otro nombre usando ~</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_overall</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_caption</span>(<span class="st">"**Tabla 2. Distribución de casos por provincia de residencia**"</span>) <span class="sc">%&gt;%</span> <span class="co">#con este comando agregamos el título a la tabla</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bold_labels</span>() <span class="co"># Con este ponemos en negritas los títulos de las categorías</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>tabla_03</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="mintqmulvq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mintqmulvq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mintqmulvq thead, #mintqmulvq tbody, #mintqmulvq tfoot, #mintqmulvq tr, #mintqmulvq td, #mintqmulvq th {
  border-style: none;
}

#mintqmulvq p {
  margin: 0;
  padding: 0;
}

#mintqmulvq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mintqmulvq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mintqmulvq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mintqmulvq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mintqmulvq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mintqmulvq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mintqmulvq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mintqmulvq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mintqmulvq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mintqmulvq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mintqmulvq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mintqmulvq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mintqmulvq .gt_spanner_row {
  border-bottom-style: hidden;
}

#mintqmulvq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mintqmulvq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mintqmulvq .gt_from_md > :first-child {
  margin-top: 0;
}

#mintqmulvq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mintqmulvq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mintqmulvq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mintqmulvq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mintqmulvq .gt_row_group_first td {
  border-top-width: 2px;
}

#mintqmulvq .gt_row_group_first th {
  border-top-width: 2px;
}

#mintqmulvq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mintqmulvq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mintqmulvq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mintqmulvq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mintqmulvq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mintqmulvq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mintqmulvq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mintqmulvq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mintqmulvq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mintqmulvq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mintqmulvq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mintqmulvq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mintqmulvq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mintqmulvq .gt_left {
  text-align: left;
}

#mintqmulvq .gt_center {
  text-align: center;
}

#mintqmulvq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mintqmulvq .gt_font_normal {
  font-weight: normal;
}

#mintqmulvq .gt_font_bold {
  font-weight: bold;
}

#mintqmulvq .gt_font_italic {
  font-style: italic;
}

#mintqmulvq .gt_super {
  font-size: 65%;
}

#mintqmulvq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mintqmulvq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mintqmulvq .gt_indent_1 {
  text-indent: 5px;
}

#mintqmulvq .gt_indent_2 {
  text-indent: 10px;
}

#mintqmulvq .gt_indent_3 {
  text-indent: 15px;
}

#mintqmulvq .gt_indent_4 {
  text-indent: 20px;
}

#mintqmulvq .gt_indent_5 {
  text-indent: 25px;
}

#mintqmulvq .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#mintqmulvq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption><strong>Tabla 2. Distribución de casos por provincia de residencia</strong></caption>
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="gt_col_headings header">
<th id="label" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Característica</strong></th>
<th id="stat_0" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Global</strong><br>
N = 11,030<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
<th id="stat_1" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Muerto</strong><br>
N = 67<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
<th id="stat_2" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Vivo</strong><br>
N = 10,963<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Provincias de residencia de los casos</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;provincias del sur</td>
<td class="gt_row gt_center" headers="stat_0">4,563 (41%)</td>
<td class="gt_row gt_center" headers="stat_1">39 (58%)</td>
<td class="gt_row gt_center" headers="stat_2">4,524 (41%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;provincias centrales</td>
<td class="gt_row gt_center" headers="stat_0">2,637 (24%)</td>
<td class="gt_row gt_center" headers="stat_1">6 (9.0%)</td>
<td class="gt_row gt_center" headers="stat_2">2,631 (24%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;provincia capital</td>
<td class="gt_row gt_center" headers="stat_0">1,501 (14%)</td>
<td class="gt_row gt_center" headers="stat_1">10 (15%)</td>
<td class="gt_row gt_center" headers="stat_2">1,491 (14%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;provincias del norte</td>
<td class="gt_row gt_center" headers="stat_0">1,020 (9.2%)</td>
<td class="gt_row gt_center" headers="stat_1">3 (4.5%)</td>
<td class="gt_row gt_center" headers="stat_2">1,017 (9.3%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;povincias occidentales</td>
<td class="gt_row gt_center" headers="stat_0">696 (6.3%)</td>
<td class="gt_row gt_center" headers="stat_1">3 (4.5%)</td>
<td class="gt_row gt_center" headers="stat_2">693 (6.3%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;provincias orientales</td>
<td class="gt_row gt_center" headers="stat_0">595 (5.4%)</td>
<td class="gt_row gt_center" headers="stat_1">5 (7.5%)</td>
<td class="gt_row gt_center" headers="stat_2">590 (5.4%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;resto de provincias</td>
<td class="gt_row gt_center" headers="stat_0">18 (0.2%)</td>
<td class="gt_row gt_center" headers="stat_1">1 (1.5%)</td>
<td class="gt_row gt_center" headers="stat_2">17 (0.2%)</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="4" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> n (%)</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p>Las variables o columnas que especificamos en la función <strong>select()</strong> son las que vemos en la tabla de salida. El paquete <strong>gtsummary</strong> tiene muchos parámetros que nos facilita tanto para hacer el resumen como para presentar los datos.</p>
<p>En el siguiente <a href="https://www.danieldsjoberg.com/gtsummary/articles/tbl_summary.html" title="tablas de resumen de gtsummary">Tutorial</a> puedes ver en más detalles todos las opciones para generar una tabla usando <strong>gtsummary.</strong> Si usas Chrome o Edge, puedes traducir sin problemas al español dado que está solo en inglés.</p>
</section>
<section id="análisis-de-persona" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="análisis-de-persona"><span class="header-section-number">7.4</span> Análisis de persona</h2>
<p>En esta sección vamos a usar de nuevo la función <strong>tbl_summary</strong> del paquete <strong>gtsummary</strong> para hacer el resumen de persona, en este paso toma en cuenta que desde que creamos el dataframe <em>base_arreglada</em> tomamos las variables que vamos a usar, si nos hacen falta, solo tenemos que actualizar este objeto. Las variables a usar serian el <em>sexo</em>, la <em>edad</em>, el <em>país de procedencia</em>, el <em>grupo de edad</em> y la <em>condición de egreso</em>, que para los pasos anteriores la hemos usado con la finalidad de ver el comportamiento de la letalidad.</p>
<p>Algo que es importante recalcar, que vaya usando como buena práctica, ve nombrando los objetos de forma que sea fácil para identificar e integrar en tu informe luego, por ejemplo para las tablas he usado la nomenclatura “tabla_” así será más fácil asociar el orden como quisiera ir presentando en el informe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>tabla_04 <span class="ot">&lt;-</span> base_arreglada <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">a_mes_atencion=</span><span class="fu">format</span>(fecha_atencion, <span class="st">"%Y-%m"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2020-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sexo, grupo_edad,edad1, pais_procedencia, condicion) <span class="sc">%&gt;%</span>  <span class="co"># las variables para describir la poblacion</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by=</span>sexo,</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">label =</span> <span class="fu">list</span>(grupo_edad<span class="sc">~</span><span class="st">"Grupo de edad"</span>, <span class="co">#Cuando tenemos dos o más variables que renombrar, debemos poner estas dentro de una lista</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>              edad1<span class="sc">~</span><span class="st">"Edad en años"</span>,</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>              grupo_edad<span class="sc">~</span><span class="st">"Grupo de edad en años"</span>,</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>              pais_procedencia<span class="sc">~</span><span class="st">"Nacionalidad"</span>,</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>              condicion<span class="sc">~</span><span class="st">"Condición de Egreso"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_overall</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_caption</span>(<span class="st">"**Tabla 3. Distribución de casos según características**"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bold_labels</span>()</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>tabla_04</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="gbiqbcihxt" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gbiqbcihxt table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gbiqbcihxt thead, #gbiqbcihxt tbody, #gbiqbcihxt tfoot, #gbiqbcihxt tr, #gbiqbcihxt td, #gbiqbcihxt th {
  border-style: none;
}

#gbiqbcihxt p {
  margin: 0;
  padding: 0;
}

#gbiqbcihxt .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gbiqbcihxt .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gbiqbcihxt .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gbiqbcihxt .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gbiqbcihxt .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gbiqbcihxt .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gbiqbcihxt .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gbiqbcihxt .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gbiqbcihxt .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gbiqbcihxt .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gbiqbcihxt .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gbiqbcihxt .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gbiqbcihxt .gt_spanner_row {
  border-bottom-style: hidden;
}

#gbiqbcihxt .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gbiqbcihxt .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gbiqbcihxt .gt_from_md > :first-child {
  margin-top: 0;
}

#gbiqbcihxt .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gbiqbcihxt .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gbiqbcihxt .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gbiqbcihxt .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gbiqbcihxt .gt_row_group_first td {
  border-top-width: 2px;
}

#gbiqbcihxt .gt_row_group_first th {
  border-top-width: 2px;
}

#gbiqbcihxt .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gbiqbcihxt .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gbiqbcihxt .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gbiqbcihxt .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gbiqbcihxt .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gbiqbcihxt .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gbiqbcihxt .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gbiqbcihxt .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gbiqbcihxt .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gbiqbcihxt .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gbiqbcihxt .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gbiqbcihxt .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gbiqbcihxt .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gbiqbcihxt .gt_left {
  text-align: left;
}

#gbiqbcihxt .gt_center {
  text-align: center;
}

#gbiqbcihxt .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gbiqbcihxt .gt_font_normal {
  font-weight: normal;
}

#gbiqbcihxt .gt_font_bold {
  font-weight: bold;
}

#gbiqbcihxt .gt_font_italic {
  font-style: italic;
}

#gbiqbcihxt .gt_super {
  font-size: 65%;
}

#gbiqbcihxt .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gbiqbcihxt .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gbiqbcihxt .gt_indent_1 {
  text-indent: 5px;
}

#gbiqbcihxt .gt_indent_2 {
  text-indent: 10px;
}

#gbiqbcihxt .gt_indent_3 {
  text-indent: 15px;
}

#gbiqbcihxt .gt_indent_4 {
  text-indent: 20px;
}

#gbiqbcihxt .gt_indent_5 {
  text-indent: 25px;
}

#gbiqbcihxt .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#gbiqbcihxt div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption><strong>Tabla 3. Distribución de casos según características</strong></caption>
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="gt_col_headings header">
<th id="label" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Característica</strong></th>
<th id="stat_0" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Global</strong><br>
N = 11,030<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
<th id="stat_1" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Femenino</strong><br>
N = 5,577<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
<th id="stat_2" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Masculino</strong><br>
N = 5,453<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Grupo de edad en años</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;&lt;1</td>
<td class="gt_row gt_center" headers="stat_0">2 (&lt;0.1%)</td>
<td class="gt_row gt_center" headers="stat_1">2 (&lt;0.1%)</td>
<td class="gt_row gt_center" headers="stat_2">0 (0%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;1_4</td>
<td class="gt_row gt_center" headers="stat_0">72 (0.7%)</td>
<td class="gt_row gt_center" headers="stat_1">28 (0.5%)</td>
<td class="gt_row gt_center" headers="stat_2">44 (0.8%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;10_19</td>
<td class="gt_row gt_center" headers="stat_0">464 (4.2%)</td>
<td class="gt_row gt_center" headers="stat_1">310 (5.6%)</td>
<td class="gt_row gt_center" headers="stat_2">154 (2.8%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;20_29</td>
<td class="gt_row gt_center" headers="stat_0">2,931 (27%)</td>
<td class="gt_row gt_center" headers="stat_1">1,673 (30%)</td>
<td class="gt_row gt_center" headers="stat_2">1,258 (23%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;30_39</td>
<td class="gt_row gt_center" headers="stat_0">3,006 (27%)</td>
<td class="gt_row gt_center" headers="stat_1">1,514 (27%)</td>
<td class="gt_row gt_center" headers="stat_2">1,492 (27%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;40_49</td>
<td class="gt_row gt_center" headers="stat_0">2,302 (21%)</td>
<td class="gt_row gt_center" headers="stat_1">1,080 (19%)</td>
<td class="gt_row gt_center" headers="stat_2">1,222 (22%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;5_9</td>
<td class="gt_row gt_center" headers="stat_0">36 (0.3%)</td>
<td class="gt_row gt_center" headers="stat_1">17 (0.3%)</td>
<td class="gt_row gt_center" headers="stat_2">19 (0.3%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;50_59</td>
<td class="gt_row gt_center" headers="stat_0">1,347 (12%)</td>
<td class="gt_row gt_center" headers="stat_1">589 (11%)</td>
<td class="gt_row gt_center" headers="stat_2">758 (14%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;60 o más</td>
<td class="gt_row gt_center" headers="stat_0">870 (7.9%)</td>
<td class="gt_row gt_center" headers="stat_1">364 (6.5%)</td>
<td class="gt_row gt_center" headers="stat_2">506 (9.3%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Edad en años</td>
<td class="gt_row gt_center" headers="stat_0">36 (27, 47)</td>
<td class="gt_row gt_center" headers="stat_1">34 (26, 45)</td>
<td class="gt_row gt_center" headers="stat_2">38 (29, 48)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Nacionalidad</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;1</td>
<td class="gt_row gt_center" headers="stat_0">9,070 (82%)</td>
<td class="gt_row gt_center" headers="stat_1">4,464 (80%)</td>
<td class="gt_row gt_center" headers="stat_2">4,606 (84%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;2</td>
<td class="gt_row gt_center" headers="stat_0">1,910 (17%)</td>
<td class="gt_row gt_center" headers="stat_1">1,100 (20%)</td>
<td class="gt_row gt_center" headers="stat_2">810 (15%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;3</td>
<td class="gt_row gt_center" headers="stat_0">50 (0.5%)</td>
<td class="gt_row gt_center" headers="stat_1">13 (0.2%)</td>
<td class="gt_row gt_center" headers="stat_2">37 (0.7%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Condición de Egreso</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Muerto</td>
<td class="gt_row gt_center" headers="stat_0">67 (0.6%)</td>
<td class="gt_row gt_center" headers="stat_1">20 (0.4%)</td>
<td class="gt_row gt_center" headers="stat_2">47 (0.9%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Vivo</td>
<td class="gt_row gt_center" headers="stat_0">10,963 (99%)</td>
<td class="gt_row gt_center" headers="stat_1">5,557 (100%)</td>
<td class="gt_row gt_center" headers="stat_2">5,406 (99%)</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="4" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> n (%); Mediana (Q1, Q3)</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p>Algo a notar cuando generamos la tabla es que el grupo de edad no esta ordenado y también se puede mejorar su presentación, para corregir vamos a volver al proceso de “limpieza” y usamos de nuevo la función <strong>case_when().</strong> Podemos ver que hay una categoría que no sale en orden (5_9a) para corregir esto como funciona case_when es valor actual (grupo_edad==“5_9”) seguido de una virgulilla (~) y el nuevo valor (sugerencia: “05-09”) y para el último valor ya sea mantener el resto de los valores se usa TRUE ~ nombre de la variable, también las categoría de esta variable tienen como separador de los rangos de edades “_” y queremos poner “-”, para esto usamos la función <strong>str_replace()</strong> de tidyverse donde especificamos la variable, luego el termino a ser buscado y luego el termino de reemplazo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>tabla_04 <span class="ot">&lt;-</span> base_arreglada <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">a_mes_atencion=</span><span class="fu">format</span>(fecha_atencion, <span class="st">"%Y-%m"</span>),</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">grupo_edad=</span><span class="fu">case_when</span>(grupo_edad<span class="sc">==</span><span class="st">"&lt;1"</span><span class="sc">~</span><span class="st">"00-01"</span>,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>                            grupo_edad<span class="sc">==</span><span class="st">"1_4"</span><span class="sc">~</span><span class="st">"01-04"</span>,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>                            grupo_edad<span class="sc">==</span><span class="st">"5_9"</span><span class="sc">~</span><span class="st">"05-09"</span>,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>                            <span class="cn">TRUE</span><span class="sc">~</span>grupo_edad),</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">grupo_edad=</span><span class="fu">str_replace</span>(grupo_edad,<span class="st">"_"</span>,<span class="st">" - "</span>)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">%&gt;%</span> <span class="co">#aqui cambiamos el underscore por el dash con la funcion str_replace</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(fecha_atencion<span class="sc">&gt;=</span><span class="st">"2019-01-01"</span>, fecha_atencion<span class="sc">&lt;</span><span class="st">"2022-01-01"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sexo, grupo_edad,edad1, pais_procedencia, condicion) <span class="sc">%&gt;%</span>  <span class="co"># las variables para describir la poblacion</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by=</span>sexo,</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">label =</span> <span class="fu">list</span>(grupo_edad<span class="sc">~</span><span class="st">"Grupo de edad"</span>, <span class="co">#Cuando tenemos dos o más variables que renombrar, debemos poner estas dentro de una lista</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>              edad1<span class="sc">~</span><span class="st">"Edad en años"</span>,</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>              grupo_edad<span class="sc">~</span><span class="st">"Grupo de edad en años"</span>,</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>              pais_procedencia<span class="sc">~</span><span class="st">"Nacionalidad"</span>,</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>              condicion<span class="sc">~</span><span class="st">"Condición de Egreso"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_overall</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_caption</span>(<span class="st">"**Tabla 4. Distribución de casos según características**"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bold_labels</span>()</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>tabla_04</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="aesbhqyddn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#aesbhqyddn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#aesbhqyddn thead, #aesbhqyddn tbody, #aesbhqyddn tfoot, #aesbhqyddn tr, #aesbhqyddn td, #aesbhqyddn th {
  border-style: none;
}

#aesbhqyddn p {
  margin: 0;
  padding: 0;
}

#aesbhqyddn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#aesbhqyddn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#aesbhqyddn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#aesbhqyddn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#aesbhqyddn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aesbhqyddn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aesbhqyddn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aesbhqyddn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#aesbhqyddn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#aesbhqyddn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#aesbhqyddn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#aesbhqyddn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#aesbhqyddn .gt_spanner_row {
  border-bottom-style: hidden;
}

#aesbhqyddn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#aesbhqyddn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#aesbhqyddn .gt_from_md > :first-child {
  margin-top: 0;
}

#aesbhqyddn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#aesbhqyddn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#aesbhqyddn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#aesbhqyddn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#aesbhqyddn .gt_row_group_first td {
  border-top-width: 2px;
}

#aesbhqyddn .gt_row_group_first th {
  border-top-width: 2px;
}

#aesbhqyddn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aesbhqyddn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#aesbhqyddn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#aesbhqyddn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aesbhqyddn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aesbhqyddn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#aesbhqyddn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#aesbhqyddn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#aesbhqyddn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aesbhqyddn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aesbhqyddn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#aesbhqyddn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aesbhqyddn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#aesbhqyddn .gt_left {
  text-align: left;
}

#aesbhqyddn .gt_center {
  text-align: center;
}

#aesbhqyddn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#aesbhqyddn .gt_font_normal {
  font-weight: normal;
}

#aesbhqyddn .gt_font_bold {
  font-weight: bold;
}

#aesbhqyddn .gt_font_italic {
  font-style: italic;
}

#aesbhqyddn .gt_super {
  font-size: 65%;
}

#aesbhqyddn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#aesbhqyddn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#aesbhqyddn .gt_indent_1 {
  text-indent: 5px;
}

#aesbhqyddn .gt_indent_2 {
  text-indent: 10px;
}

#aesbhqyddn .gt_indent_3 {
  text-indent: 15px;
}

#aesbhqyddn .gt_indent_4 {
  text-indent: 20px;
}

#aesbhqyddn .gt_indent_5 {
  text-indent: 25px;
}

#aesbhqyddn .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#aesbhqyddn div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption><strong>Tabla 4. Distribución de casos según características</strong></caption>
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="gt_col_headings header">
<th id="label" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Característica</strong></th>
<th id="stat_0" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Global</strong><br>
N = 16,394<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
<th id="stat_1" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Femenino</strong><br>
N = 8,357<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
<th id="stat_2" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Masculino</strong><br>
N = 8,037<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Grupo de edad en años</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;00-01</td>
<td class="gt_row gt_center" headers="stat_0">2 (&lt;0.1%)</td>
<td class="gt_row gt_center" headers="stat_1">2 (&lt;0.1%)</td>
<td class="gt_row gt_center" headers="stat_2">0 (0%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;01-04</td>
<td class="gt_row gt_center" headers="stat_0">91 (0.6%)</td>
<td class="gt_row gt_center" headers="stat_1">38 (0.5%)</td>
<td class="gt_row gt_center" headers="stat_2">53 (0.7%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;05-09</td>
<td class="gt_row gt_center" headers="stat_0">45 (0.3%)</td>
<td class="gt_row gt_center" headers="stat_1">24 (0.3%)</td>
<td class="gt_row gt_center" headers="stat_2">21 (0.3%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;10 - 19</td>
<td class="gt_row gt_center" headers="stat_0">720 (4.4%)</td>
<td class="gt_row gt_center" headers="stat_1">484 (5.8%)</td>
<td class="gt_row gt_center" headers="stat_2">236 (2.9%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;20 - 29</td>
<td class="gt_row gt_center" headers="stat_0">4,503 (27%)</td>
<td class="gt_row gt_center" headers="stat_1">2,571 (31%)</td>
<td class="gt_row gt_center" headers="stat_2">1,932 (24%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;30 - 39</td>
<td class="gt_row gt_center" headers="stat_0">4,556 (28%)</td>
<td class="gt_row gt_center" headers="stat_1">2,324 (28%)</td>
<td class="gt_row gt_center" headers="stat_2">2,232 (28%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;40 - 49</td>
<td class="gt_row gt_center" headers="stat_0">3,375 (21%)</td>
<td class="gt_row gt_center" headers="stat_1">1,593 (19%)</td>
<td class="gt_row gt_center" headers="stat_2">1,782 (22%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;50 - 59</td>
<td class="gt_row gt_center" headers="stat_0">1,928 (12%)</td>
<td class="gt_row gt_center" headers="stat_1">833 (10.0%)</td>
<td class="gt_row gt_center" headers="stat_2">1,095 (14%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;60 o más</td>
<td class="gt_row gt_center" headers="stat_0">1,174 (7.2%)</td>
<td class="gt_row gt_center" headers="stat_1">488 (5.8%)</td>
<td class="gt_row gt_center" headers="stat_2">686 (8.5%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Edad en años</td>
<td class="gt_row gt_center" headers="stat_0">35 (27, 46)</td>
<td class="gt_row gt_center" headers="stat_1">34 (26, 44)</td>
<td class="gt_row gt_center" headers="stat_2">37 (29, 48)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Nacionalidad</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;1</td>
<td class="gt_row gt_center" headers="stat_0">13,414 (82%)</td>
<td class="gt_row gt_center" headers="stat_1">6,630 (79%)</td>
<td class="gt_row gt_center" headers="stat_2">6,784 (84%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;2</td>
<td class="gt_row gt_center" headers="stat_0">2,899 (18%)</td>
<td class="gt_row gt_center" headers="stat_1">1,712 (20%)</td>
<td class="gt_row gt_center" headers="stat_2">1,187 (15%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;3</td>
<td class="gt_row gt_center" headers="stat_0">81 (0.5%)</td>
<td class="gt_row gt_center" headers="stat_1">15 (0.2%)</td>
<td class="gt_row gt_center" headers="stat_2">66 (0.8%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Condición de Egreso</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Muerto</td>
<td class="gt_row gt_center" headers="stat_0">76 (0.5%)</td>
<td class="gt_row gt_center" headers="stat_1">24 (0.3%)</td>
<td class="gt_row gt_center" headers="stat_2">52 (0.6%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Vivo</td>
<td class="gt_row gt_center" headers="stat_0">16,318 (100%)</td>
<td class="gt_row gt_center" headers="stat_1">8,333 (100%)</td>
<td class="gt_row gt_center" headers="stat_2">7,985 (99%)</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="4" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> n (%); Mediana (Q1, Q3)</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p>Ahora con este mismo resumen que usamos para la tabla anterior, vamos a hacer un gráfico de grupos de edades por sexo, que usamos de forma común para describir la población de cualquier evento. Continuando un poco con <strong>ggplot</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="imagenes/07ggplot.png" class="img-fluid figure-img"></p>
<figcaption>Anatomía de la función de ggplot</figcaption>
</figure>
</div>
<p>Aparte de lo presentado en la imagen anterior, existen otras funciones complementarias como scale (<strong>scale_</strong>) que ayudan al ajuste del gráfico, pero mientras tanto, solo vamos a enfocarnos en lo básico.</p>
<p>En el gráfico que hicimos de tiempo solo presentamos una variable. En este ejemplo, vamos a presentar una variable con dos o más categorías para mostrar una funcionalidad muy importante de la función de <strong>ggplot</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#primero hacemos una tabla resumen con solo grupo edad y sexo</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>grafico_edad_reco <span class="ot">&lt;-</span> base_arreglada <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grupo_edad=</span><span class="fu">case_when</span>(grupo_edad<span class="sc">==</span><span class="st">"1_4"</span><span class="sc">~</span><span class="st">"01_04"</span>,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>                              grupo_edad<span class="sc">==</span><span class="st">"5_9"</span><span class="sc">~</span><span class="st">"05_09"</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>                              <span class="cn">TRUE</span><span class="sc">~</span>grupo_edad)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(grupo_edad, sexo) <span class="sc">%&gt;%</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(grupo_edad, sexo) <span class="sc">%&gt;%</span>  <span class="co">#agrupamos por estas dos variables</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span>  <span class="co">#realizamos una cuenta de estas dos variables, el resultado es un dataframe con 3 variables (grupo_edad, sexo y n o cuenta)</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>grupo_edad, <span class="at">y=</span>n, <span class="at">fill=</span>sexo))<span class="sc">+</span> <span class="co"># como estamos conectando el resumen con la función de ggplot, no necesitamos especificar el parametro data= o fuente de datos</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_col</span>()</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="co">#veamos el gráfico </span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>grafico_edad_reco</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06-analisisresultados_files/figure-html/36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Al igual con el ejemplo anterior, antes de usar este gráfico para presentar podemos hacer cambios, ejemplo, las barras que representa cada sexo por separado, el color de relleno también.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>grafico_edad_reco <span class="ot">&lt;-</span> base_arreglada <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grupo_edad=</span><span class="fu">case_when</span>(grupo_edad<span class="sc">==</span><span class="st">"1_4"</span><span class="sc">~</span><span class="st">"01_04"</span>,</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                              grupo_edad<span class="sc">==</span><span class="st">"5_9"</span><span class="sc">~</span><span class="st">"05_09"</span>,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                              <span class="cn">TRUE</span><span class="sc">~</span>grupo_edad)) <span class="sc">%&gt;%</span> </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(grupo_edad, sexo) <span class="sc">%&gt;%</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(grupo_edad, sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>grupo_edad, </span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">y=</span>n, </span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill=</span>sexo))<span class="sc">+</span> <span class="co">#fill es relleno, </span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_col</span>(<span class="at">color=</span><span class="st">"black"</span>,     <span class="co">#agregamos color al borde</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">position =</span> <span class="st">"dodge"</span>)<span class="sc">+</span> <span class="co">#especificamos que la variable sexo será en columnas separadas, no apiladas</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"Femenino"</span><span class="ot">=</span><span class="st">"white"</span>,</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Masculino"</span><span class="ot">=</span><span class="st">"grey"</span>))<span class="sc">+</span><span class="co">#con esta función de ayuda podemos manualmente cambiar los colores de relleno, con el parametro values=creamos un vector con las categorias y le asignamos un color.</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_minimal</span>() <span class="co">#este es un tema (theme) que trae ggplot, hay paquetes que tienen temas mucho más acabado, </span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>grafico_edad_reco</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06-analisisresultados_files/figure-html/37-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Todavía hay muchos elementos que cambiar pero te dejo de tarea que busques lo siguiente:</p>
<ul>
<li><p>¿Cómo agregar un separador de miles al número del eje y?</p></li>
<li><p>¿Cómo cambiar los títulos de los ejes y agregar título del gráfico?. (ver ejemplo del análisis de tiempo)</p></li>
<li><p>¿Cómo puedo cambiar los colores del relleno de las barras?. ¿Cómo puedo remover o agregar las líneas guía en el fondo del gráfico?</p></li>
</ul>
<p>La idea es que puedas también ir desarrollando la habilidad de usar las referencias que están disponible. Realmente no debes de aprenderte todos los comandos y funciones, lo que debes de tomar siempre en cuenta es definir bien <strong>que es lo que necesitas o quieres</strong> para luego tratar de procesarlo, esto lo mencioné al inicio de este manual.</p>
<p>Ahora que tenemos algunos elementos para comenzar un análisis descriptivo podemos comenzar a trabajar como ponerlos en un mismo documento usando <strong>rmarkdown</strong>.</p>
</section>
<section id="evaluando-si-existe-relación-entre-la-variable-dependiente-e-independiente" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="evaluando-si-existe-relación-entre-la-variable-dependiente-e-independiente"><span class="header-section-number">7.5</span> Evaluando si existe relación entre la variable dependiente e independiente</h2>
<p>En este ejercicio en los pasos anteriores pudimos hacer un poco de analisis exploratorio, descriptivo, ahora brevemente vamos a realizar un análisis de estadística inferencial usando regresión lineal. Para esto bien sabes que la regresión lineal es un método aplicable en muchas situaciones en las que se estudia la relación entre dos o más variables o predecir un comportamiento, y para esto vamos a usar dos variables que sean <strong>continuas</strong>.</p>
<p>Vamos a evaluar si existe relación entre el año de ocurrencia de casos y la cantidad de casos y tambien predecir la cantidad de casos para años futuros, para esto tenemos que hacer una transformación de los datos. Primero vamos a crear un nuevo dataframe o una tabla resumen a partir del dataframe de la base arreglada:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>casos_por_ann <span class="ot">&lt;-</span> base_arreglada <span class="sc">%&gt;%</span> <span class="co">#nueva tabla</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ano_atencion) <span class="sc">%&gt;%</span>        <span class="co">#agrupamos por año del caso</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()                           <span class="co">#hacemos un conteo de casos (cada fila) por año</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>casos_por_ann</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
# Groups:   ano_atencion [5]
  ano_atencion     n
         &lt;dbl&gt; &lt;int&gt;
1         2017  4035
2         2018  4613
3         2019  5352
4         2020  5008
5         2021  6039</code></pre>
</div>
</div>
<p>Como podemos ver tenemos una nueva tabla que tiene dos columnas, la de los años (ano_atencion o variable independiente) y la del total de casos (n o variable dependiente). Ahora vamos a construir un nuevo objeto que tendrá el resumen del análisis de la regresión lineal, para esto vamos a usar la función <strong>lm()</strong> del paquete {base} de R. Los argumentos para esta formula son la base de datos, la variable independiente seguida del simbolo “~” o virgulilla y luego las variables independientes, cada una separada por el simbolo “+” en caso de ser más de una variable independiente. Luego de crear el objeto de regresión lineal o lm, para ver los resultados usamos la función <strong>summary()</strong> para ver los resultados con más detalles del modelo de regresión.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>modelo_reg_lin <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data=</span>casos_por_ann, n<span class="sc">~</span>ano_atencion) </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(modelo_reg_lin)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = n ~ ano_atencion, data = casos_por_ann)

Residuals:
     1      2      3      4      5 
 -93.8   43.9  342.6 -441.7  149.0 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept)  -883956.3   216639.3  -4.080   0.0266 *
ano_atencion     440.3      107.3   4.103   0.0262 *
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 339.3 on 3 degrees of freedom
Multiple R-squared:  0.8488,    Adjusted R-squared:  0.7984 
F-statistic: 16.84 on 1 and 3 DF,  p-value: 0.02619</code></pre>
</div>
</div>
<p>Según la salida que nos muestra la consola tenemos que por cada año que pasa, la variable dependiente (casos) aumenta en 440.3 casos y el valor de R al cuadrado (coeficiente de correlación) es de <strong>0.7983689</strong> que significa que el 77% de la variable dependiente se puede explicar por la variable independiente. Verifica el valor de p, este al parecer es menor de 0.05, lo que si hubiésemos planteado una hipótesis nula (no hay relación entre ambas variables) podemos rechazarla y quedarnos con la hipótesis alterna (hay relación significativa entre ambas variables).</p>
<p>Supongamos que ahora quisiéramos saber en los años posteriores a los que tenemos en la base resumen de los casos por año, digamos que en los próximos 5 años, como se comportarían los casos reportados, pudiéramos usar la función <strong>predict()</strong> de {base}. Primero vamos a crear un nuevo dataframe con los años futuros y luego vamos a usar el modelo de regresión lineal y le pasamos este nuevo dataframe, así:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#nuevo dataframe (5 años)</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>ann_futuros <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ano_atencion=</span><span class="fu">c</span>(<span class="dv">2022</span><span class="sc">:</span><span class="dv">2026</span>))</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co"># prediccion</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>prediccion <span class="ot">&lt;-</span> <span class="fu">predict</span>(modelo_reg_lin, ann_futuros)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(prediccion) <span class="ot">&lt;-</span> ann_futuros<span class="sc">$</span>ano_atencion <span class="co">#para agregar el nombre o el año</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>prediccion</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  2022   2023   2024   2025   2026 
6330.3 6770.6 7210.9 7651.2 8091.5 </code></pre>
</div>
</div>
<p>Si queremos agregar las predicciones al dataframe resumen de los años y casos, debemos convertir el vector <em>prediccion</em> en dataframe (usando la función data.frame) y luego unirlo al dataframe resumen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>pred_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(prediccion) <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>() <span class="sc">%&gt;%</span>  <span class="co">#aplicamos la función rownames_to_columns para agregar la columna de años</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">ano_atencion=</span><span class="dv">1</span>, <span class="at">n=</span><span class="dv">2</span>) <span class="sc">%&gt;%</span>  <span class="co">#corregimos los nombres (importante antes de unir las tablas)</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ano_atencion=</span><span class="fu">as.numeric</span>(ano_atencion)) <span class="co">#convertimos a tipo numerico la columna de años</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>nuevo_df <span class="ot">&lt;-</span> casos_por_ann <span class="sc">%&gt;%</span>  <span class="co">#la base original</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(pred_df) <span class="co">#unimos la base nueva con las predicciones</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>nuevo_df</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
# Groups:   ano_atencion [10]
   ano_atencion     n
          &lt;dbl&gt; &lt;dbl&gt;
 1         2017 4035 
 2         2018 4613 
 3         2019 5352 
 4         2020 5008 
 5         2021 6039 
 6         2022 6330.
 7         2023 6771.
 8         2024 7211.
 9         2025 7651.
10         2026 8092.</code></pre>
</div>
</div>
<p>Esta es una muestra de como podemos hacer un análisis de estadistica inferencial. Hay muchos otros que podemos hacer, te recomiendo que revises los temas que te interesan dominar sobre análisis estadístico y busca como puedes llevarlos a cabo usando R, vas a encontrar una gran cantidad de ejemplos.</p>
<p>Este que vimos es un solo abordaje, y dependiendo de tus objetivos puede aplicar otros.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-waring2022" class="csl-entry" role="listitem">
Waring, Elin, Michael Quinn, Amelia McNamara, Eduardo Arino de la Rubia, Hao Zhu, Julia Lowndes, Shannon Ellis, et al. 2022. <em>Skimr: Compact and Flexible Summaries of Data</em>. <a href="https://cran.r-project.org/web/packages/skimr/index.html">https://cran.r-project.org/web/packages/skimr/index.html</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "¡Copiado!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "¡Copiado!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./05-excel_a_R_intro.html" class="pagination-link" aria-label="Transición desde Excel a R">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Transición desde Excel a R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./07-reporte.html" class="pagination-link" aria-label="Preparación de reporte (integración de las salidas en un documento)">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Preparación de reporte (integración de las salidas en un documento)</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>